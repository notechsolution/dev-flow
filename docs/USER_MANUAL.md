# DevFlow 用户手册

欢迎使用 DevFlow - 基于 AI 的需求管理与开发流程工具！

---

## 目录

1. [快速开始](#快速开始)
2. [用户管理](#用户管理)
3. [项目管理](#项目管理)
4. [需求管理](#需求管理)
5. [AI 功能使用](#ai-功能使用)
6. [常见问题](#常见问题)

---

## 快速开始

### 首次登录

1. 在浏览器中访问 DevFlow 应用：
   ```
   http://localhost:8099
   ```

2. 使用默认管理员账号登录：
   - **用户名**: `admin`
   - **密码**: `admin123`

   > ⚠️ **重要安全提示**：首次登录后请立即修改密码！

### 修改密码

1. 点击右上角的用户头像
2. 选择"个人设置"
3. 在"安全设置"中修改密码
4. 输入当前密码和新密码
5. 点击"保存"

---

## 用户管理

### 创建新用户（管理员功能）

1. 点击左侧菜单"用户管理"
2. 点击"新建用户"按钮
3. 填写用户信息：
   - 用户名（必填）
   - 邮箱（必填）
   - 初始密码（必填）
   - 用户角色：
     - **ADMIN**: 管理员，拥有所有权限
     - **USER**: 普通用户，可创建和管理自己的项目
4. 点击"创建"

### 编辑用户信息

1. 在用户列表中找到目标用户
2. 点击"编辑"按钮
3. 修改用户信息
4. 点击"保存"

### 禁用/启用用户

1. 在用户列表中找到目标用户
2. 点击"启用/禁用"切换按钮
3. 禁用后用户将无法登录系统

---

## 项目管理

### 创建项目

1. 点击左侧菜单"项目管理"
2. 点击"新建项目"按钮
3. 填写项目信息：
   - **项目名称**（必填）：简短有意义的名称
   - **项目描述**：详细描述项目目标和范围
   - **项目状态**：
     - PLANNING: 计划中
     - ACTIVE: 进行中
     - COMPLETED: 已完成
     - ARCHIVED: 已归档
4. 点击"创建"

### 查看项目详情

1. 在项目列表中点击项目名称
2. 可以看到：
   - 项目基本信息
   - 项目下的所有用户故事
   - 项目统计信息

### 编辑项目

1. 进入项目详情页
2. 点击"编辑项目"按钮
3. 修改项目信息
4. 点击"保存"

### 删除项目

1. 进入项目详情页
2. 点击"删除项目"按钮
3. 确认删除操作

   > ⚠️ **注意**：删除项目会同时删除该项目下的所有用户故事，此操作不可恢复！

---

## 需求管理

### 创建用户故事

DevFlow 提供两种创建用户故事的方式：

#### 方式一：快速创建

1. 进入项目详情页
2. 点击"新建用户故事"
3. 填写基本信息：
   - 标题
   - 描述
   - 优先级（HIGH/MEDIUM/LOW）
   - 预估工时
4. 点击"创建"

#### 方式二：AI 辅助创建（推荐）

1. 进入项目详情页
2. 点击"AI 创建用户故事"
3. 输入原始需求描述（可以是简单的想法或需求）
   
   **示例输入**：
   ```
   我希望用户能够在系统中搜索商品，
   并且可以按价格、销量等维度筛选
   ```

4. 点击"下一步：AI 需求澄清"

5. **需求澄清阶段**：
   - AI 会自动生成一系列澄清问题
   - 例如：
     - "搜索功能需要支持模糊搜索吗？"
     - "是否需要支持高级筛选条件组合？"
     - "搜索结果如何排序？"
   - 尽可能详细地回答每个问题
   - 可以跳过不适用的问题

6. 点击"下一步：AI 优化需求"

7. **查看 AI 优化结果**：
   - AI 会基于您的回答生成优化后的需求
   - 包括：
     - 完整的用户故事描述
     - 验收标准
     - 测试用例建议
   - 可以手动编辑 AI 生成的内容

8. 确认无误后，点击"完成创建"

### 查看用户故事

1. 在项目详情页可以看到用户故事列表
2. 点击用户故事标题查看详情
3. 详情页包含：
   - 完整描述
   - 验收标准
   - 测试用例
   - 创建时间和更新时间
   - 当前状态

### 编辑用户故事

1. 进入用户故事详情页
2. 点击"编辑"按钮
3. 修改内容
4. 点击"保存"

### 更新用户故事状态

用户故事有以下状态：
- **TODO**: 待处理
- **IN_PROGRESS**: 进行中
- **REVIEW**: 审查中
- **TESTING**: 测试中
- **DONE**: 已完成
- **BLOCKED**: 阻塞

更新状态：
1. 进入用户故事详情页
2. 选择新的状态
3. 系统自动保存

### 删除用户故事

1. 进入用户故事详情页
2. 点击"删除"按钮
3. 确认删除操作

---

## AI 功能使用

DevFlow 集成了强大的 AI 功能，帮助您更好地管理需求。

### AI 需求澄清

**用途**：帮助您完善模糊的需求描述

**使用场景**：
- 初步想法还不够明确
- 需要挖掘隐藏的需求细节
- 想要确保需求描述完整

**使用技巧**：
- 在原始需求中尽量包含关键信息
- 认真回答 AI 的澄清问题
- 如果某个问题不适用，可以跳过或说明原因

**示例对话**：
```
原始需求：
"需要一个用户注册功能"

AI 澄清问题：
1. 注册需要验证邮箱吗？
   回答：是的，需要发送验证邮件

2. 是否支持第三方账号注册（如 GitHub）？
   回答：暂时不需要，只支持邮箱注册

3. 密码复杂度有什么要求？
   回答：至少 8 位，包含字母和数字
```

### AI 需求优化

**用途**：将简单的需求描述转换为专业的用户故事

**输出内容**：
- 标准的用户故事格式（As a... I want... So that...）
- 详细的验收标准
- 建议的测试用例

**使用技巧**：
- 提供足够的上下文信息
- 在需求澄清阶段尽量详细
- AI 生成的内容可以手动编辑调整

### AI 测试用例生成

**用途**：根据需求自动生成测试用例

**输出内容**：
- 功能测试用例
- 边界条件测试
- 异常情况测试

**使用建议**：
- 将生成的测试用例作为基础
- 根据实际情况补充特殊场景
- 与测试团队讨论完善

---

## 常见问题

### Q1: 忘记密码怎么办？

**A**: 
1. 在登录页面点击"忘记密码"
2. 输入注册时使用的邮箱
3. 系统会发送重置密码链接到您的邮箱
4. 点击邮件中的链接设置新密码

> 注意：需要系统管理员正确配置了邮件服务

### Q2: AI 功能无法使用怎么办？

**A**: 请检查以下几点：
1. 系统管理员是否配置了 AI 服务（Qwen 或 Ollama）
2. 查看右上角是否有 AI 服务错误提示
3. 联系管理员查看后台日志：`logs/ai-service.log`

### Q3: 为什么我创建的项目其他人看不到？

**A**: DevFlow 的权限机制：
- 项目创建者（Owner）拥有完全控制权
- 如需其他人访问，需要实现团队成员管理功能
- 管理员可以查看所有项目

### Q4: 如何导出需求数据？

**A**: 
1. 进入项目详情页
2. 点击"导出"按钮
3. 选择导出格式（JSON/Excel）
4. 下载导出文件

### Q5: 可以批量导入需求吗？

**A**: 
1. 准备 Excel 或 CSV 文件（使用模板）
2. 进入项目详情页
3. 点击"导入"按钮
4. 选择文件上传
5. 系统会验证并导入数据

### Q6: AI 生成的内容不满意怎么办？

**A**: 
1. 可以点击"重新生成"按钮尝试新的结果
2. 在需求澄清阶段提供更详细的信息
3. 手动编辑 AI 生成的内容
4. AI 只是辅助工具，最终内容由您决定

### Q7: 系统支持多语言吗？

**A**: 当前版本主要支持中文界面和内容。AI 功能基于中文训练，中文效果最好。

### Q8: 如何备份我的数据？

**A**: 
- 数据存储在 MongoDB 数据库中
- 管理员可以使用 `mongodump` 命令备份
- 建议定期备份重要数据
- 详见[部署指南](DEPLOYMENT_GUIDE.md)中的备份章节

---

## 快捷键

| 功能 | 快捷键 | 说明 |
|-----|-------|------|
| 新建项目 | `Ctrl + N` | 快速创建新项目 |
| 搜索 | `Ctrl + K` | 全局搜索 |
| 保存 | `Ctrl + S` | 保存当前编辑 |
| 返回 | `Esc` | 关闭对话框或返回 |

---

## 最佳实践

### 撰写优质需求的建议

1. **使用标准的用户故事格式**：
   ```
   作为一个 [用户角色]
   我希望 [功能描述]
   以便 [价值/目的]
   ```

2. **明确验收标准**：
   - 使用清晰、可测试的语言
   - 避免模糊的表述
   - 每个标准应该是独立可验证的

3. **合理拆分需求**：
   - 每个用户故事应该在 1-2 个sprint 内完成
   - 过大的需求应该拆分成多个小故事
   - 保持需求的独立性

4. **充分利用 AI 功能**：
   - 不要害怕从简单的想法开始
   - 认真对待 AI 的澄清问题
   - 将 AI 生成的内容作为起点进行优化

---

## 技术支持

如遇到问题：

1. 查阅 [故障排查指南](TROUBLESHOOTING.md)
2. 查看应用日志：`logs/devflow.log`
3. 联系系统管理员
4. 访问项目 GitHub 页面提交 Issue

---

## 更新日志

### v0.0.1 - Alpha 版本
- ✨ 项目管理功能
- ✨ 用户故事管理
- ✨ AI 需求澄清
- ✨ AI 需求优化
- ✨ AI 测试用例生成
- ✨ 用户认证和授权
- ✨ OAuth2 第三方登录
- 🗄️ MongoDB 数据存储

---

**祝您使用愉快！** 🎉
